# ã‚³ãƒ¼ãƒ‰æ”¹å–„ç‚¹ãƒªã‚¹ãƒˆ

## ğŸ”´ é«˜å„ªå…ˆåº¦ï¼ˆå³åº§ã«ä¿®æ­£ã™ã¹ãï¼‰

### 1. æœªä½¿ç”¨ã®å¤‰æ•°
**å ´æ‰€**: `app/page.tsx:22`
```typescript
const [loading, setLoading] = useState(false);
```
- `loading`ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãªã„
- **ä¿®æ­£**: å‰Šé™¤ã™ã‚‹ã‹ã€å®Ÿéš›ã«ä½¿ç”¨ã™ã‚‹

### 2. alert()ã®ä½¿ç”¨ï¼ˆä¸€è²«æ€§ã®å•é¡Œï¼‰
**å ´æ‰€**: 
- `components/PlanInputForm.tsx:34`
- `components/RecordModal.tsx:47, 56`
- `components/TodayView.tsx:53` (confirmã®ã¿)

- `TodayView`ã§ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯`alert()`ã‚’ä½¿ç”¨
- **ä¿®æ­£**: çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¸å‚™
**å ´æ‰€**: `hooks/useLocalStorage.ts`
- localStorageã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã•ã‚Œãªã„
- **ä¿®æ­£**: ã‚¨ãƒ©ãƒ¼ã‚’è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é€šçŸ¥ã™ã‚‹ä»•çµ„ã¿ã‚’è¿½åŠ 

### 4. useEffectã®ä¾å­˜é…åˆ—è­¦å‘Š
**å ´æ‰€**: `app/page.tsx:36`
```typescript
// eslint-disable-next-line react-hooks/exhaustive-deps
```
- ä¾å­˜é…åˆ—ãŒä¸å®Œå…¨
- **ä¿®æ­£**: é©åˆ‡ãªä¾å­˜é…åˆ—ã‚’è¨­å®šã™ã‚‹ã‹ã€ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¦‹ç›´ã™

## ğŸŸ¡ ä¸­å„ªå…ˆåº¦ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»UXæ”¹å–„ï¼‰

### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ä¸è¶³
**å ´æ‰€**: `components/AchievementStats.tsx`
- æ¯å›çµ±è¨ˆã‚’å†è¨ˆç®—ã—ã¦ã„ã‚‹
- **ä¿®æ­£**: `useMemo`ã§ãƒ¡ãƒ¢åŒ–

### 6. ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
**å ´æ‰€**: 
- `components/PlanInputForm.tsx`
- `components/RecordModal.tsx`
- `components/EditRecordModal.tsx`

- Escapeã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹æ©Ÿèƒ½ãŒãªã„
- **ä¿®æ­£**: `useEffect`ã§ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 

### 7. ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯å‡¦ç†ã®ä¸çµ±ä¸€
**å ´æ‰€**: `app/page.tsx:337`
```typescript
<div onClick={(e) => e.stopPropagation()}>
```
- `PlanInputForm`ã®ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹å‡¦ç†ãŒãªã„
- **ä¿®æ­£**: ä»–ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã¨åŒæ§˜ã«èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ã‚ˆã†ã«çµ±ä¸€

### 8. æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†ã®é‡è¤‡
**å ´æ‰€**: è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†ãŒå„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§é‡è¤‡
- **ä¿®æ­£**: å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’ä½œæˆ

### 9. ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
**å ´æ‰€**: `components/CalendarGrid.tsx:82`
```typescript
const remainingCells = 42 - calendarCells.length; // 6 weeks Ã— 7 days
```
- **ä¿®æ­£**: å®šæ•°ã¨ã—ã¦å®šç¾©
```typescript
const CALENDAR_WEEKS = 6;
const DAYS_PER_WEEK = 7;
const TOTAL_CALENDAR_CELLS = CALENDAR_WEEKS * DAYS_PER_WEEK;
```

### 10. ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°
**å ´æ‰€**: `components/PlanInputForm.tsx`, `components/RecordModal.tsx`
- ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®ã¿æ¤œè¨¼
- **ä¿®æ­£**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 

## ğŸŸ¢ ä½å„ªå…ˆåº¦ï¼ˆã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ä¿å®ˆæ€§ï¼‰

### 11. console.log/errorã®æœ¬ç•ªç’°å¢ƒå¯¾å¿œ
**å ´æ‰€**: è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«
- æœ¬ç•ªç’°å¢ƒã§ã‚‚console.logãŒå®Ÿè¡Œã•ã‚Œã‚‹
- **ä¿®æ­£**: ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡ã™ã‚‹ã‹ã€ãƒ­ã‚®ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨

### 12. å‹å®‰å…¨æ€§ã®å‘ä¸Š
**å ´æ‰€**: è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«
- ä¸€éƒ¨ã§å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªç®‡æ‰€ãŒã‚ã‚‹
- **ä¿®æ­£**: ã‚ˆã‚Šå³å¯†ãªå‹å®šç¾©

### 13. localStorageãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
**å ´æ‰€**: `hooks/useLocalStorage.ts`
- ç ´æã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã å ´åˆã®å‡¦ç†ãŒãªã„
- **ä¿®æ­£**: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’è¿½åŠ 

### 14. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å›½éš›åŒ–
**å ´æ‰€**: å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè‹±èªã®ã¿
- **ä¿®æ­£**: i18nå¯¾å¿œï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

### 15. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²
**å ´æ‰€**: `app/page.tsx`
- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¤§ãã™ãã‚‹ï¼ˆ362è¡Œï¼‰
- **ä¿®æ­£**: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚„ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†å‰²

### 16. å®šæ•°ã®ä¸€å…ƒç®¡ç†
**å ´æ‰€**: è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«
- è‰²ãƒãƒƒãƒ”ãƒ³ã‚°ã€æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ãŒåˆ†æ•£
- **ä¿®æ­£**: `lib/constants.ts`ã‚’ä½œæˆã—ã¦ä¸€å…ƒç®¡ç†

### 17. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä¸è¶³
**å ´æ‰€**: å…¨ãƒ•ã‚¡ã‚¤ãƒ«
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚„E2Eãƒ†ã‚¹ãƒˆãŒãªã„
- **ä¿®æ­£**: Jest + React Testing Libraryã§ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 

### 18. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä¸è¶³
**å ´æ‰€**: ä¸€éƒ¨é–¢æ•°
- JSDocã‚³ãƒ¡ãƒ³ãƒˆãŒä¸è¶³ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚‹
- **ä¿®æ­£**: ã™ã¹ã¦ã®å…¬é–‹é–¢æ•°ã«JSDocã‚’è¿½åŠ 

### 19. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®æ”¹å–„
**å ´æ‰€**: è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ä¸€éƒ¨ã®ãƒœã‚¿ãƒ³ã«`aria-label`ãŒä¸è¶³
- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ãŒä¸ååˆ†ãªç®‡æ‰€ãŒã‚ã‚‹
- **ä¿®æ­£**: ARIAå±æ€§ã®è¿½åŠ ã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã®å®Ÿè£…

### 20. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®æœ€é©åŒ–
**å ´æ‰€**: å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ä¸€éƒ¨ã®ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãŒæœ€é©åŒ–ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§
- **ä¿®æ­£**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ãƒ†ã‚¹ãƒˆ

## ğŸ”µ æ©Ÿèƒ½è¿½åŠ ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

### 21. ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- JSON/CSVå½¢å¼ã§ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ

### 22. ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
**å ´æ‰€**: `components/TodayView.tsx:53`
- `confirm()`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- **ä¿®æ­£**: å°‚ç”¨ã®ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ

### 23. ä¸€æ‹¬æ“ä½œæ©Ÿèƒ½
- è¤‡æ•°æ—¥ã®ãƒ—ãƒ©ãƒ³/è¨˜éŒ²ã‚’ä¸€æ‹¬è¨­å®š
- ç¯„å›²é¸æŠæ©Ÿèƒ½

### 24. çµ±è¨ˆæƒ…å ±ã®æ‹¡å……
- ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆChart.jsç­‰ï¼‰
- ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
- ç›®æ¨™é”æˆç‡ã®æ¨ç§»

### 25. é€šçŸ¥æ©Ÿèƒ½
- ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥
- ç›®æ¨™æœªé”æˆã®ã‚¢ãƒ©ãƒ¼ãƒˆ
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

### 26. ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ

### 27. ãƒ‡ãƒ¼ã‚¿ã®åŒæœŸ
- è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹é–“ã§ã®åŒæœŸï¼ˆIndexedDB + Service Workerï¼‰
- ã‚¯ãƒ©ã‚¦ãƒ‰ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

## ğŸ“Š å„ªå…ˆåº¦åˆ¥ã®å®Ÿè£…è¨ˆç”»

### Phase 1ï¼ˆå³åº§ã«ä¿®æ­£ï¼‰
1. æœªä½¿ç”¨å¤‰æ•°ã®å‰Šé™¤
2. alert()ã®çµ±ä¸€ï¼ˆã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
3. useEffectä¾å­˜é…åˆ—ã®ä¿®æ­£
4. ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œï¼ˆEscapeï¼‰

### Phase 2ï¼ˆçŸ­æœŸï¼‰
5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆuseMemoï¼‰
6. ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯å‡¦ç†ã®çµ±ä¸€
7. ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã®å®šæ•°åŒ–
8. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### Phase 3ï¼ˆä¸­æœŸï¼‰
9. localStorageã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
10. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
11. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²
12. å®šæ•°ã®ä¸€å…ƒç®¡ç†

### Phase 4ï¼ˆé•·æœŸï¼‰
13. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è¿½åŠ 
14. å›½éš›åŒ–å¯¾å¿œ
15. æ©Ÿèƒ½è¿½åŠ ï¼ˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆç­‰ï¼‰

---

## å…·ä½“çš„ãªä¿®æ­£ä¾‹

### ä¾‹1: ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
```typescript
// components/ErrorMessage.tsx
interface ErrorMessageProps {
  message: string;
  onDismiss?: () => void;
}

export default function ErrorMessage({ message, onDismiss }: ErrorMessageProps) {
  return (
    <div className="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg">
      {message}
      {onDismiss && (
        <button onClick={onDismiss} className="ml-2">Ã—</button>
      )}
    </div>
  );
}
```

### ä¾‹2: å®šæ•°ã®ä¸€å…ƒç®¡ç†
```typescript
// lib/constants.ts
export const CALENDAR_CONFIG = {
  WEEKS: 6,
  DAYS_PER_WEEK: 7,
  TOTAL_CELLS: 42,
} as const;

export const QUICK_SELECT_OPTIONS = [10, 20, 30, 40, 50, 60] as const;

export const ACHIEVEMENT_COLORS = {
  WHITE: "white",
  YELLOW: "yellow",
  GREEN: "green",
  BROWN: "brown",
  BLACK: "black",
  PURPLE: "purple",
} as const;
```

### ä¾‹3: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ä½œæˆ
```typescript
// hooks/useModal.ts
export function useModal() {
  const [isOpen, setIsOpen] = useState(false);
  
  const open = useCallback(() => setIsOpen(true), []);
  const close = useCallback(() => setIsOpen(false), []);
  
  useEffect(() => {
    if (!isOpen) return;
    
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === "Escape") close();
    };
    
    document.addEventListener("keydown", handleEscape);
    return () => document.removeEventListener("keydown", handleEscape);
  }, [isOpen, close]);
  
  return { isOpen, open, close };
}
```

